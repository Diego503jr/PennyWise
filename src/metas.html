<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pennywise | Metas</title>
    <!-- Fuentes y Bootstrap -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Open+Sans:wght@400;500&display=swap"
        rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="./css/metas.css" />
    <link rel="stylesheet" href="./css/styles.css">
</head>

<body>
    <!--NavBar-->
    <div id="navbar"></div>

    <main class="container mt-4 mb-5">
        <div class="row align-items-center py-3">
            <div class="col-1 d-none d-md-block"><!-- left spacer for centering --></div>
            <div class="col-12 col-md-10 text-center">
                <h3 class="fw-bold mb-0">Metas Ahorro</h3>
            </div>
        </div>

        <!-- tarjetas de metas -->
        <section id="listaMetas" class="row g-4 my-4">
            <!-- tarjetas se inyectan desde JS -->
        </section>


        <!-- formulario nueva meta -->
        <section class="card mi-tarjeta p-4 mt-4">
            <h5 class="fw-bold text-center mb-3">Nueva Meta</h5>
            <form id="formMeta" class="row g-3 align-items-end">
                <div class="col-md-6">
                    <label class="form-label">Nombre</label>
                    <input type="text" id="metaNombre" class="form-control" placeholder="Ej: Fondo emergencias"
                        required>
                </div>
                <div class="col-md-3">
                    <label class="form-label">Tipo</label>
                    <select id="metaTipo" class="form-select">
                        <option value="general">General</option>
                        <option value="tiempo">Por tiempo</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <label class="form-label">Monto objetivo ($)</label>
                    <input type="number" id="metaObjetivo" class="form-control" placeholder="1000" min="1" required>
                </div>
                <div class="col-md-3" id="metaPeriodosWrapper" style="display:none;">
                    <label class="form-label">Periodos</label>
                    <input type="number" id="metaPeriodos" class="form-control" placeholder="12" min="1">
                </div>
                <div class="col-md-3" id="metaContribucionWrapper">
                    <label class="form-label">Contribución</label>
                    <select id="metaContribucion" class="form-select">
                        <option value="voluntaria">Voluntaria</option>
                        <option value="automatica">Automática</option>
                    </select>
                </div>
                <div class="col-md-3" id="metaProximaWrapper">
                    <label class="form-label">Próxima contribución</label>
                    <input type="date" id="metaProxima" class="form-control">
                </div>
                <div class="col-md-3 text-end">
                    <button type="submit" class="btn btn-login mt-3">Registrar</button>
                </div>
            </form>
        </section>

        <!-- Calculadora -->
        <section class="card mi-tarjeta p-4 mt-4" id="seccionCalculadora">
            <h5 class="fw-bold text-center mb-3">Calculadora</h5>
            <div class="row g-3">
                <div class="col-12 d-flex justify-content-center mb-2">
                    <div class="btn-group" role="group" aria-label="Modo calculadora">
                        <button type="button" class="btn-login2  mt-3" id="calcModoNormal">Calculadora
                            Normal</button>
                        <button type="button" class="btn-login2 mt-3" id="calcModoAvanzada">Calculadora
                            Avanzada</button>
                    </div>
                </div>

                <div class="col-12" id="calcNormal">
                    <div class="calculadora-normal p-3">
                        <input type="text" id="calcPantalla" class="form-control mb-2" readonly value="0">
                        <div class="calc-grid">
                            <button class="btn btn-light calc-btn">7</button>
                            <button class="btn btn-light calc-btn">8</button>
                            <button class="btn btn-light calc-btn">9</button>
                            <button class="btn btn-light calc-btn calc-op">/</button>

                            <button class="btn btn-light calc-btn">4</button>
                            <button class="btn btn-light calc-btn">5</button>
                            <button class="btn btn-light calc-btn">6</button>
                            <button class="btn btn-light calc-btn calc-op">*</button>

                            <button class="btn btn-light calc-btn">1</button>
                            <button class="btn btn-light calc-btn">2</button>
                            <button class="btn btn-light calc-btn">3</button>
                            <button class="btn btn-light calc-btn calc-op">-</button>

                            <button class="btn btn-light calc-btn">0</button>
                            <button class="btn btn-light calc-btn">.</button>
                            <button class="btn btn-success calc-btn" id="calcEquals">=</button>
                            <button class="btn btn-light calc-btn calc-op">+</button>
                        </div>
                        <div class="mt-2">
                            <button class="btn btn-danger w-100" id="calcClear">C</button>
                        </div>
                    </div>
                </div>

                <div class="col-12" id="calcAvanzada" style="display:none;">
                    <div class="p-3">
                        <div class="row g-2">
                            <div class="col-md-4">
                                <label class="form-label">Monto ($)</label>
                                <input type="number" id="avMonto" class="form-control" min="0" step="0.01">
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">Interés mensual (%)</label>
                                <input type="number" id="avInteres" class="form-control" min="0" step="0.01">
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">Meses</label>
                                <input type="number" id="avMeses" class="form-control" min="1" step="1">
                            </div>
                        </div>
                        <div class="text-end mt-3">
                            <button id="avCalcular" class="btn btn-login mt-3">Calcular pago mensual</button>
                        </div>
                        <div class="mt-3">
                            <div id="avResultado" class="small text-muted">Resultado: —</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- modal contribuir -->
        <div class="modal fade" id="modalContribuir" tabindex="-1">
            <div class="modal-dialog modal-sm">
                <div class="modal-content p-3">
                    <h6 class="fw-bold mb-3">Contribuir a meta</h6>
                    <form id="formContribuir">
                        <input type="hidden" id="contribuirId">
                        <div class="mb-3">
                            <label class="form-label">Monto a aportar ($)</label>
                            <input type="number" id="contribuirMonto" class="form-control" min="1" required>
                        </div>
                        <div class="text-end">
                            <button type="button" class="btn btn-secondary me-2"
                                data-bs-dismiss="modal">Cancelar</button>
                            <button type="submit" class="btn btn-gold">Aportar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- modal editar -->
        <div class="modal fade" id="modalEditarMeta" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content p-3">
                    <h6 class="fw-bold mb-3">Editar Meta</h6>
                    <form id="formEditarMeta">
                        <input type="hidden" id="editarMetaId">
                        <div class="row g-3">
                            <div class="col-md-8">
                                <label class="form-label">Nombre</label>
                                <input type="text" id="editarMetaNombre" class="form-control" required>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">Objetivo ($)</label>
                                <input type="number" id="editarMetaObjetivo" class="form-control" min="1" required>
                            </div>
                            <div class="col-md-4" id="editarMetaTipoWrapper">
                                <label class="form-label">Tipo</label>
                                <select id="editarMetaTipo" class="form-select">
                                    <option value="general">General</option>
                                    <option value="tiempo">Por tiempo</option>
                                </select>
                            </div>
                            <div class="col-md-4" id="editarMetaPeriodosWrapper" style="display:none;">
                                <label class="form-label">Periodos</label>
                                <input type="number" id="editarMetaPeriodos" class="form-control" min="1">
                            </div>
                            <div class="col-md-4" id="editarMetaContribucionWrapper">
                                <label class="form-label">Contribución</label>
                                <select id="editarMetaContribucion" class="form-select">
                                    <option value="voluntaria">Voluntaria</option>
                                    <option value="automatica">Automática</option>
                                </select>
                            </div>
                            <div class="col-md-4" id="editarMetaProximaWrapper">
                                <label class="form-label">Próxima contribución</label>
                                <input type="date" id="editarMetaProxima" class="form-control">
                            </div>
                        </div>
                        <div class="text-end mt-3">
                            <button type="button" class="btn btn-secondary me-2"
                                data-bs-dismiss="modal">Cancelar</button>
                            <button type="submit" class="btn btn-gold">Guardar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- modal eliminar meta -->
        <div class="modal fade" id="modalEliminarMeta" tabindex="-1">
            <div class="modal-dialog modal-sm">
                <div class="modal-content p-3">
                    <h6 class="fw-bold mb-3">Confirmar eliminación</h6>
                    <p id="eliminarMetaTexto">¿Eliminar esta meta?</p>
                    <div class="text-end mt-3">
                        <button type="button" class="btn btn-secondary me-2" data-bs-dismiss="modal">Cancelar</button>
                        <button id="confirmarEliminarMeta" type="button" class="btn btn-danger">Eliminar</button>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <div id="footer"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.js"></script>
    <script src="./js/metas.js"></script>
    <script src="./componentes/addFooterNav.js"></script>
</body>

</html>